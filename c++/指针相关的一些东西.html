<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>指针和数组 | Longqinx&#39;s Notes</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/assets/css/0.styles.9f84806b.css" as="style"><link rel="preload" href="/assets/js/app.969a6014.js" as="script"><link rel="preload" href="/assets/js/2.0c4bddf9.js" as="script"><link rel="preload" href="/assets/js/1.50b457b8.js" as="script"><link rel="preload" href="/assets/js/26.be06b78c.js" as="script"><link rel="prefetch" href="/assets/js/10.325b9f09.js"><link rel="prefetch" href="/assets/js/11.845e3692.js"><link rel="prefetch" href="/assets/js/12.ecdb524b.js"><link rel="prefetch" href="/assets/js/13.3f3f6a36.js"><link rel="prefetch" href="/assets/js/14.eb7a3d07.js"><link rel="prefetch" href="/assets/js/15.b60f3925.js"><link rel="prefetch" href="/assets/js/16.85253907.js"><link rel="prefetch" href="/assets/js/17.c2838453.js"><link rel="prefetch" href="/assets/js/18.3256f17f.js"><link rel="prefetch" href="/assets/js/19.d8afd0ae.js"><link rel="prefetch" href="/assets/js/20.10e47ab9.js"><link rel="prefetch" href="/assets/js/21.33b300c9.js"><link rel="prefetch" href="/assets/js/22.271589f5.js"><link rel="prefetch" href="/assets/js/23.f187cd00.js"><link rel="prefetch" href="/assets/js/24.25d46f1d.js"><link rel="prefetch" href="/assets/js/25.6dbe905b.js"><link rel="prefetch" href="/assets/js/27.c1cdaecc.js"><link rel="prefetch" href="/assets/js/28.c84982d2.js"><link rel="prefetch" href="/assets/js/29.75d6d01f.js"><link rel="prefetch" href="/assets/js/3.af33e5d6.js"><link rel="prefetch" href="/assets/js/30.dfc04b59.js"><link rel="prefetch" href="/assets/js/31.e768d834.js"><link rel="prefetch" href="/assets/js/32.bd424b57.js"><link rel="prefetch" href="/assets/js/33.e9f62ae9.js"><link rel="prefetch" href="/assets/js/34.6e660565.js"><link rel="prefetch" href="/assets/js/35.259ec1af.js"><link rel="prefetch" href="/assets/js/36.cabec235.js"><link rel="prefetch" href="/assets/js/37.62de5401.js"><link rel="prefetch" href="/assets/js/38.65324daa.js"><link rel="prefetch" href="/assets/js/39.d859ec36.js"><link rel="prefetch" href="/assets/js/4.45665f8a.js"><link rel="prefetch" href="/assets/js/40.3d954b2a.js"><link rel="prefetch" href="/assets/js/5.7098d77a.js"><link rel="prefetch" href="/assets/js/6.0c0a0f39.js"><link rel="prefetch" href="/assets/js/7.6a854e57.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.77260563.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9f84806b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="Longqinx's Notes" class="logo"> <span class="site-name can-hide">Longqinx's Notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/c++/" class="nav-link router-link-active">
  C/C++
</a></div><div class="nav-item"><a href="/linux/" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/dsa/" class="nav-link">
  数据结构与算法
</a></div><div class="nav-item"><a href="/project/" class="nav-link">
  我的小项目
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于" class="dropdown-title"><span class="title">关于</span> <span class="arrow down"></span></button> <button type="button" aria-label="关于" class="mobile-dropdown-title"><span class="title">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/about/contactMe.html" class="nav-link">
  联系我
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/c++/" class="nav-link router-link-active">
  C/C++
</a></div><div class="nav-item"><a href="/linux/" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/dsa/" class="nav-link">
  数据结构与算法
</a></div><div class="nav-item"><a href="/project/" class="nav-link">
  我的小项目
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于" class="dropdown-title"><span class="title">关于</span> <span class="arrow down"></span></button> <button type="button" aria-label="关于" class="mobile-dropdown-title"><span class="title">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/about/contactMe.html" class="nav-link">
  联系我
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>指针和数组</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/c++/%E6%8C%87%E9%92%88%E7%9B%B8%E5%85%B3%E7%9A%84%E4%B8%80%E4%BA%9B%E4%B8%9C%E8%A5%BF.html#指针和数组" class="sidebar-link">指针和数组</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/c++/%E6%8C%87%E9%92%88%E7%9B%B8%E5%85%B3%E7%9A%84%E4%B8%80%E4%BA%9B%E4%B8%9C%E8%A5%BF.html#指针常量、常量指针" class="sidebar-link">指针常量、常量指针</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/c++/%E6%8C%87%E9%92%88%E7%9B%B8%E5%85%B3%E7%9A%84%E4%B8%80%E4%BA%9B%E4%B8%9C%E8%A5%BF.html#函数指针、指针函数、函数指针数组和指向函数指针数组的指针" class="sidebar-link">函数指针、指针函数、函数指针数组和指向函数指针数组的指针</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="指针和数组"><a href="#指针和数组" class="header-anchor">#</a> 指针和数组</h2> <ul><li><p>数组名本身可作为指向第一个元素的指针使用</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">*</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 1</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n&quot;</span><span class="token punctuation">,</span><span class="token operator">*</span><span class="token punctuation">(</span>arr <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 3</span>
</code></pre></div></li> <li><p>指针也有类型，直接将数组名赋值给某个指针，则该指针应该对应数组元素类型的指针；而将数组名取地址（&amp;）后赋值给某个指针，该指针应该是指向数组本身的指针</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//数组名可当作指向首元素的指针</span>
<span class="token keyword">int</span> <span class="token operator">*</span>elemPtr <span class="token operator">=</span> arr<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token operator">*</span>ptr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span>arr <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n&quot;</span><span class="token punctuation">,</span> elemPtr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 3 ，指针也可以和数组一样用下标运算</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span>ptr <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 5</span>
</code></pre></div></li> <li><p>上述代码体现了<code>&amp;a</code>和<code>a</code>使用上的差别，其中<code>(&amp;arr + 1)</code>其实是以数组大小为单位将指针向后移动了一位，而非数组元素大小为单位，可拆解为下述代码</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">int</span> <span class="token operator">*</span>ptr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span>arr <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//上一行代码可以拆开为两部分</span>
<span class="token comment">//1. 注意，这里指针类型是指向5个int元素数组的指针</span>
<span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>arrPtr<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">;</span> 
<span class="token comment">//2. 指针的 +1 操作是根据指针所指类型的大小为一个单位来计算，因此这里 +1 其实是移动到数组后下一个可以存储5个int元素的数组位置</span>
arrPtr <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span> 
<span class="token comment">//这里将arrPtr强转为int*类型，此时再进行算术运算就是以int大小为偏移量计算了</span>
<span class="token comment">//一开始 attPtr 指向 arr 数组的最后一个元素的下一个位置，向前 -1 一个int位置，自然就变成了 arr 的最后一个元素，也就是 5</span>
<span class="token keyword">int</span> <span class="token operator">*</span>ptr2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token punctuation">)</span> arrPtr<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>上述代码还可以这样理解</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">int</span> <span class="token operator">*</span>ptr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span>arr <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//上一行可拆解为：</span>
<span class="token keyword">long</span> <span class="token keyword">long</span> arrAddr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">)</span>arr<span class="token punctuation">;</span>
arrAddr <span class="token operator">+=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&amp;arr得到的是指向数组arr的指针，因此 +1 操作就是偏移sizeof(arr)个字节</span>

<span class="token comment">//printf(&quot;%d\n&quot;, *(ptr - 1));则可以替换为：</span>
arrAddr <span class="token operator">-=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//(int *) (&amp;arr + 1)强转之后，ptr变成了指向int类型的指针，因此 -1 操作就是偏移 -sizeof(int) 个字节</span>
<span class="token keyword">int</span> <span class="token operator">*</span>ptr3 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span>arrAddr<span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n&quot;</span><span class="token punctuation">,</span><span class="token operator">*</span>ptr3<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//5</span>
</code></pre></div></li> <li><p><strong>总结</strong>：</p> <ul><li>指针的+、-操作具体偏移多少位置取决于操作的是什么类型的指针。不同类型的指针可能指向同一个内存位置，但是因为类型不同，执行+、-操作的偏移量就不同。通常可以理解为指针+、-操作的偏移量就是指针所指类型的大小，也就是<code>sizeof(XXX)</code>的值</li> <li>数组名能够当作指向数组首元素的指针来使用</li></ul></li></ul> <h2 id="指针常量、常量指针"><a href="#指针常量、常量指针" class="header-anchor">#</a> 指针常量、常量指针</h2> <ul><li><p>指针本身和指针指向的数据都可被<code>const</code>修饰，指针常量表示指针本身是一个常量，而常量指针表示指针指向的是一个常量</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">int</span> value <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> otherValue <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token operator">*</span><span class="token keyword">const</span> ptr1 <span class="token operator">=</span> <span class="token operator">&amp;</span>value<span class="token punctuation">;</span> <span class="token comment">//指针是常量不能变</span>
<span class="token keyword">int</span> <span class="token keyword">const</span> <span class="token operator">*</span>ptr2 <span class="token operator">=</span> <span class="token operator">&amp;</span>value<span class="token punctuation">;</span> <span class="token comment">//指向的数据不能变，但指针本身可变</span>
<span class="token keyword">const</span> <span class="token keyword">int</span> <span class="token operator">*</span><span class="token keyword">const</span> ptr3 <span class="token operator">=</span> <span class="token operator">&amp;</span>value<span class="token punctuation">;</span> <span class="token comment">//指向的数据和指针本身都不能变</span>
<span class="token keyword">const</span> <span class="token keyword">int</span> <span class="token operator">*</span>ptr4 <span class="token operator">=</span> <span class="token operator">&amp;</span>value<span class="token punctuation">;</span> <span class="token comment">//指向的数据不能变，但指针本身可变</span>

<span class="token operator">*</span>ptr1 <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">//正确，指针本身不能修改，但是指向的内容可修改</span>
<span class="token operator">*</span>ptr2 <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">//错误，指向的数据不能修改</span>
<span class="token operator">*</span>ptr3 <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">//错误，指向的数据不能修改</span>
<span class="token operator">*</span>ptr4 <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">//错误，指向的数据不能修改</span>

ptr1 <span class="token operator">=</span> <span class="token operator">&amp;</span>otherValue<span class="token punctuation">;</span> <span class="token comment">//错误，指针本身不能修改</span>
ptr2 <span class="token operator">=</span> <span class="token operator">&amp;</span>otherValue<span class="token punctuation">;</span> <span class="token comment">//正确，指向的数据不能修改，但指针本身可修改</span>
ptr3 <span class="token operator">=</span> <span class="token operator">&amp;</span>otherValue<span class="token punctuation">;</span> <span class="token comment">//错误，指针本身也不能修改</span>
ptr4 <span class="token operator">=</span> <span class="token operator">&amp;</span>otherValue<span class="token punctuation">;</span> <span class="token comment">//正确，指向的数据不能修改，但指针本身可修改</span>
</code></pre></div></li> <li><p><strong>总结</strong>：</p> <ul><li><p>涉及到指针的常量性判断，主要还是看<code>const</code>修饰的是谁。可以这么理解：const永远修饰其右边最近的一个符号。</p> <blockquote><p>如 int *const ptr = &amp;value; ，const右边最近的符号是 ptr ，而ptr本身是一个指针的符号，因此const修饰的是指针本身，即指针本身不可变</p> <p>而 int const *ptr = &amp;value; 和 const int * ptr = &amp;value;是等价的，const右边最近的符号是 *ptr ，这表示ptr指向的数据，因此const修饰的数据而非指针本身，即指向的数据是不可变的</p></blockquote></li></ul></li></ul> <h2 id="函数指针、指针函数、函数指针数组和指向函数指针数组的指针"><a href="#函数指针、指针函数、函数指针数组和指向函数指针数组的指针" class="header-anchor">#</a> 函数指针、指针函数、函数指针数组和指向函数指针数组的指针</h2> <ul><li><p>函数指针，即指向函数的指针；而指针函数指返回值是指针的函数。指针函数并无什么特别的，因此主要看函数指针相关的问题</p></li> <li><p>函数名称和数组名称类似，可以直接作为该函数的指针使用</p></li> <li><p>函数指针的声明</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">//函数声明</span>
<span class="token keyword">int</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//typedef 定义函数指针别名</span>
<span class="token keyword">typedef</span> <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>FuncPtr<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//using 定义函数指针别名（cpp中）</span>
<span class="token keyword">using</span> FuncPtr2 <span class="token operator">=</span> <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//直接声明定义</span>
    <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>funcPtr<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">=</span> func<span class="token punctuation">;</span>
    <span class="token comment">//借助typedef别名定义，更清晰</span>
    FuncPtr fptr <span class="token operator">=</span> func<span class="token punctuation">;</span>
    <span class="token comment">//借助using别名定义，更清晰</span>
    FuncPtr2 fptr2 <span class="token operator">=</span> func<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>函数指针相关的声明中，参数列表永远在最后，返回类型永远在最前。中间和变量名称相关的修饰决定了这是函数指针还是函数指针数组</p></li> <li><p>存储上述<code>func</code>函数的指针的数组可定义如下</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">//funcArr是一个数组，其元素是指向func函数的指针，包含两个元素</span>
<span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>funcArr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span>func<span class="token punctuation">,</span> func<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//可读性更好的方式是使用别名</span>
FuncPtr funcArr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>func<span class="token punctuation">,</span> func<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>针对上述<code>funcArr</code>数组，可定义指向它的指针如下</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">// funcArrPtr是一个指针，其指向一个数组，这个数组的元素类型是指向func的指针</span>
<span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">*</span>funcArrPtr<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>funcArr<span class="token punctuation">;</span>

<span class="token comment">//可读性更好的方式是使用别名</span>
<span class="token function">FuncPtr</span> <span class="token punctuation">(</span><span class="token operator">*</span>funcArrPtr<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>funcArr<span class="token punctuation">;</span>
</code></pre></div></li> <li><p><strong>总结</strong>：</p> <ul><li><p>函数指针相关的声明有几个规律：（1）函数返回值类型总是在最前面；（2）函数参数列表总是在最后面；（2）真正决定这个指针性质的是对于变量名的修饰</p></li> <li><p>要区分是声明数组还是声明指针，主要是根据运算符优先级确定。<code>[]</code>运算符的优先级大于<code>*</code>运算符，因此变量名先和<code>[]</code>结合就是数组，反之其是一个指针</p> <blockquote><p>如对于一般数组声明</p> <p><code>int *arr[3]</code>; 变量名arr先和[]运算符结合，因此其是一个数组；此时看剩余部分决定数组元素的类型，是<code>int*</code> 因此 arr 是一个数组，其元素类型为int类型指针。可以这样初始化：<code>int *arr[3] = {&amp;a,&amp;b,&amp;c};</code> 其中a、b、c都是int型变量</p> <p>而对于 <code>int (*arrPtr)[3]</code>; arr先和 * 结合，因此其是一个指针。再看剩余部分<code>int [3]</code>，表明此指针指向一个元素类型为int，大小为3的数组。可以这样初始化：<code>int (*arrPtr)[3] = &amp;array</code>; 其中array为三个int元素的数组</p></blockquote></li></ul></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.969a6014.js" defer></script><script src="/assets/js/2.0c4bddf9.js" defer></script><script src="/assets/js/1.50b457b8.js" defer></script><script src="/assets/js/26.be06b78c.js" defer></script>
  </body>
</html>
